<!DOCTYPE html>
<html lang="en">
<html>

	<head>
	<meta charset="UTF-8">
	<title>snake</title>
	<script>
	var map;
	var food;
	var snake;
	var timer;
	
	//map
	function Map(){
		this.width=1340;
		this.height=580;
		this.color='#888888';
		this.position='absolute';
		this.nmap = null;
		this.show=function(){
			this.nmap=document.createElement('diy');
			this.nmap.style.width=this.width+'px';
			this.nmap.style.height=this.height+'px';
			this.nmap.style.backgroundColor=this.color;
			this.nmap.style.position=this.position;
			document.getElementsByTagName('body')[0].appendChild(this.nmap);
		};
		
		
		
		
	}
	
	function Food(){
		this.width=10;
		this.height=10;
		this.x=0;
		this.y=0;
		this.color='#111111';
		this.position='absolute';
		this.nfood=null;
		
		this.show=function(){
			if(this.nfood==null){
				this.nfood=document.createElement('diy');
				this.nfood.style.width=this.width+'px';
				this.nfood.style.height=this.height+'px';
				this.nfood.style.backgroundColor=this.color;
				this.nfood.style.position=this.position;
				map.nmap.appendChild(this.nfood);
			}

			//产生随机的点
			this.x=Math.floor(Math.random()*134);
			this.y=Math.floor(Math.random()*58);
		
			this.nfood.style.left=this.x*10+'px';
			this.nfood.style.top=this.y*10+'px';
		};

	}
	
	function Snake(){
		this.width=10;
		this.height=10;
		this.position="absolute";
		this.direct='right';
		//所有蛇节的信息
		this.body=[
			[3,3,'red',null],
			[2,3,'blue',null],
			[1,3,'blue',null]];
		//显示蛇的身体
		this.show=function(){
			for(var i=0;i<this.body.length;i++){
				//如果之前没有创建蛇节div，就去创建
				if( this.body[i][3]==null){
					this.body[i][3]=document.createElement('div');
					this.body[i][3].style.width=this.width+'px';
					this.body[i][3].style.height=this.height+'px';
					this.body[i][3].style.position=this.position;	
					this.body[i][3].style.backgroundColor=this.body[i][2];
					map.nmap.appendChild(this.body[i][3]);
				}
				//如果不是第一次执行，那么只执行下面两句
				this.body[i][3].style.left=(this.body[i][0]*10)+'px';
				this.body[i][3].style.top=(this.body[i][1]*10)+'px';
			}
		};
			
		this.move=function(){
			var length = this.body.length;
			
		
			for(var i=length-1;i>0;i--){
				this.body[i][0]=this.body[i-1][0];
				this.body[i][1]=this.body[i-1][1];
				
			}
			this.body[0][0]++;
			this.show();
			
			//keycodeget
			
			this.setDirect=function(code){
			
				switch(code){
				
						case 37:
							this.direct='left';
							break;
						case 38:
							this.direct='up';
							break;
						case 39:
							this.direct='right';
							break;
						case 40:
							this.direct='down';
							break;
			}
			
		};
		
		
	
	}
	
	window.onload=function(){

		map = new Map();
		map.show();
		
		//显示食物
		food =  new Food();
		food.show();
		
		snake = new Snake();
		snake.show();
		
		//timer=setInterval('alert("12121212")',1000);
		timer=setInterval('snake.move()',1000);
		
		
		document.onkeyup=function(event){
		
			var = temp;
			if(window.event){
				temp=window.event.keycode;
			}else{
				temp=event.keyCode;
			}
			move.setDirect(temp);
		}		
	};
	
	</script>
	
	
	</head>
	<body>
	
	</body>

</html>